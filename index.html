<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¥ç§˜çš„ç¤¼ç‰©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5-audio-element-polyfill/1.2.0/html5-audio-element-polyfill.min.js"></script>
</head>
<body class="bg-black overflow-hidden h-screen flex items-center justify-center">
    <div class="relative w-full h-full flex items-center justify-center">
        <!-- èƒŒæ™¯è£…é¥° -->
        <div class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width=\'100\' height=\'100\' viewBox=\'0 0 100 100\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M11 c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z\' fill=\'%23ffffff\' fill-opacity=\'0.05\' fill-rule=\'evenodd\'/%3E%3C/svg%3E') bg-repeat opacity-30 z-0"></div>
        
        <!-- ä¸»æ ‡é¢˜ -->
        <div class="relative z-10 text-center p-8">
            <h1 class="text-3xl md:text-4xl font-bold text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.9)]">ğŸ ç¥ç§˜çš„ç¤¼ç‰©</h1>
            <p class="text-gray-300 mt-4 text-lg">æ‚¨æœ‰ä¸€ä»½ç¥ç§˜ç¤¼ç‰©ï¼Œç¡®å®šè¦æ‰“å¼€å—?</p>
            
            <!-- æ‰“å¼€æŒ‰é’® -->
            <button id="openButton" class="mt-8 bg-gradient-to-r from-pink-600 to-purple-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-pink-500/50 hover:scale-105 transition-all duration-300">
                æ‰“å¼€ç¤¼ç‰©
            </button>
        </div>
        
        <!-- ç¤¼ç‰©ç›’å­ -->
        <div id="giftBox" class="absolute w-24 h-24 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl shadow-2xl z-20 opacity-0 transition-all duration-500 transform scale-0 flex items-center justify-center">
            <div class="text-white text-4xl">ğŸ</div>
        </div>
    </div>
    <!-- ä¿®æ”¹éŸ³é¢‘è·¯å¾„ï¼ŒæŒ‡å‘ä½ æœåŠ¡å™¨ä¸Šçš„å®é™…æ–‡ä»¶å -->
    <audio id="backgroundMusic" loop preload="auto" crossorigin="anonymous">
        <source src="1762085910161.mp3" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨æš‚ä¸æ”¯æŒè¯¥éŸ³é¢‘æ ¼å¼
     </audio>
    <style>
        /* æµ®åŠ¨åŠ¨ç”» */
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(2deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
        
        /* å¼¹çª—æ ·å¼ï¼šä¸€æ’3ä¸ªï¼Œå›ºå®šå°ºå¯¸+å±…ä¸­ */
        .gift-popup {
            position: absolute;
            border-radius: 10px;
            padding: 1rem;
            color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            z-index: 100;
            width: 140px;
            height: 70px;
            text-align: center;
            font-size: 0.9rem;
            animation: float 4s ease-in-out infinite;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .popup-content {
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }
        
        .popup-message {
            font-size: 0.85rem;
            line-height: 1.3;
        }
    </style>
    <script>
        // ç¥ç¦è¯­æ•°ç»„ï¼šèå…¥æ­Œæ›²ä¸­"è‡ªç”±ã€æ¸©æŸ”"çš„æ ¸å¿ƒæ„å¢ƒ
        const giftMessages = [
            "è·Ÿç€è‡ªç”±çš„é£èµ°", "æ„¿ä½ é‡è§çš†æ¸©æŸ”", "äº‘è¿‡å†¬å»é£æ¸…æ—¶", 
            "è¯´èµ°å°±èµ°æ— ç‰µæŒ‚", "æ´»åœ¨æ­¤åˆ»å°±å¾ˆå¥½", "ç´¯äº†åˆ«å¦å®šè‡ªå·±", 
            "å¹¸è¿è‡ªæœ‰å®ƒä½¿å‘½", "äººç”Ÿç”±ä½ äº²è‡ªæ‰§ç¬”", "é£é‡Œè—ç€æ¸©æŸ”æ„", 
            "å‰è·¯çºµæœ‰è†æ£˜ï¼Œäº¦æœ‰æ˜Ÿå…‰","æˆ‘å–œæ¬¢ä½ "
        ];
        // è¡¨æƒ…ç¬¦å·æ•°ç»„
        const emojis = ['å¤ğŸ‰å¤', 'å¤âœ¨å¤', 'å¤ğŸ’–å¤', 'å¤ğŸŒŸå¤', 'å¤ğŸ’«å¤', 'å¤ğŸ’å¤', 'å¤ğŸ’˜å¤', 'å¤ğŸ’—å¤', 'å¤ğŸ’“å¤', 'å¤ğŸ’å¤'];
        
        // é¢œè‰²æ•°ç»„ï¼šæ¸©æš–è‰²è°ƒä¸ºä¸»ï¼Œå‘¼åº”æ­Œæ›²æ°›å›´
        const popupColors = [
            'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)',
            'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
            'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)',
            'linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%)',
            'linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%)'
        ];
        
        let isOpening = false;
        let isGridComplete = false;
        const popupWidth = 140; // å¼¹çª—å®½åº¦
        const popupHeight = 70; // å¼¹çª—é«˜åº¦
        const columnsPerRow = 3; // ä¸€æ’3ä¸ªå¼¹çª—
        const gridPopups = new Set(); // å­˜å‚¨"é“ºæ»¡å±å¹•çš„å¼¹çª—"ï¼Œç”¨äºæ ‡è®°ä¸æ¶ˆå¤±
        const backgroundMusic = document.getElementById('backgroundMusic');

        // é¡µé¢åŠ è½½åå…ˆç»‘å®š"å…¨å±€é¦–æ¬¡ç‚¹å‡»"äº‹ä»¶ï¼Œç¡®ä¿æµè§ˆå™¨è¯†åˆ«ä¸ºç”¨æˆ·ä¸»åŠ¨æ“ä½œ
        let hasUserInteracted = false;
        document.addEventListener('click', initAudioOnFirstClick, { once: true });
        
        // é¦–æ¬¡ç‚¹å‡»åˆå§‹åŒ–éŸ³é¢‘æ’­æ”¾æƒé™
        function initAudioOnFirstClick() {
            hasUserInteracted = true;
            // è§¦å‘ä¸€æ¬¡ç©ºæ’­æ”¾ï¼Œè®©æµè§ˆå™¨æå‰è·å–æ’­æ”¾æƒé™
            backgroundMusic.play().catch(() => {});
        }
        
        // æ‰“å¼€ç¤¼ç‰©æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById('openButton').addEventListener('click', function() {
            if (isOpening) return;
            isOpening = true;
            
            // ç¡®ä¿å·²è·å–ç”¨æˆ·äº¤äº’æƒé™åå†æ’­æ”¾
            if (hasUserInteracted) {
                playAudio();
            } else {
                // æç«¯æƒ…å†µï¼šé¦–æ¬¡ç‚¹å‡»ç›´æ¥ç‚¹æŒ‰é’®ï¼Œæ‰‹åŠ¨è§¦å‘æƒé™åˆå§‹åŒ–
                initAudioOnFirstClick();
                playAudio();
            }
            
            // éšè—æŒ‰é’®
            this.style.opacity = '0';
            setTimeout(() => {
                this.style.display = 'none';
            }, 300);
            
            // æ˜¾ç¤ºç¤¼ç‰©ç›’
            const giftBox = document.getElementById('giftBox');
            giftBox.style.opacity = '1';
            giftBox.style.transform = 'scale(1)';
            giftBox.classList.add('animate-float');
            
            // 2ç§’åæ‰“å¼€ç¤¼ç‰©ç›’ï¼ŒæŒ‰è¡Œç”Ÿæˆå¼¹çª—
            setTimeout(() => {
                giftBox.style.opacity = '0';
                setTimeout(() => {
                    giftBox.style.display = 'none';
                    createGridPopups();
                }, 500);
            }, 2000);
        });
        
        // å•ç‹¬å°è£…éŸ³é¢‘æ’­æ”¾å‡½æ•°ï¼Œä¾¿äºå¤ç”¨å’Œé”™è¯¯å¤„ç†
        function playAudio() {
            backgroundMusic.play().catch(error => {
                console.log("éŸ³é¢‘æ’­æ”¾é”™è¯¯:", error);
                // å…œåº•æç¤º
                alert("éŸ³é¢‘åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ã€‚");
                isOpening = false;
            });
        }
        
        // æŒ‰è¡Œåˆ›å»ºå¼¹çª—
        function createGridPopups() {
            const totalRows = Math.ceil(window.innerHeight / popupHeight);
            const totalColumns = columnsPerRow;
            const containerWidth = totalColumns * popupWidth;
            const offsetLeft = (window.innerWidth - containerWidth) / 2;
            
            for (let row = 0; row < totalRows; row++) {
                for (let col = 0; col < totalColumns; col++) {
                    setTimeout(() => {
                        const popup = document.createElement('div');
                        popup.className = 'gift-popup';
                        const msgIdx = Math.floor(Math.random() * giftMessages.length);
                        const emojiIdx = Math.floor(Math.random() * emojis.length);
                        const colorIdx = Math.floor(Math.random() * popupColors.length);
                        
                        popup.innerHTML = `
                            <div class="popup-content">${emojis[emojiIdx]}</div>
                            <div class="popup-message">${giftMessages[msgIdx]}</div>
                        `;
                        popup.style.background = popupColors[colorIdx];
                        popup.style.left = `${offsetLeft + col * popupWidth}px`;
                        popup.style.top = `${row * popupHeight}px`;
                        popup.style.animationDelay = `${Math.random() * 1}s`;
                        document.body.appendChild(popup);
                        
                        gridPopups.add(popup);
                        
                        if (row === totalRows - 1 && col === totalColumns - 1) {
                            isGridComplete = true;
                            startRandomPopups();
                        }
                    }, (row * totalColumns + col) * 500);
                }
            }
        }
        
        // å¼€å§‹éšæœºå¼¹çª—
        function startRandomPopups() {
            for (let i = 0; i < 10; i++) {
                setTimeout(createRandomPopup, i * 100);
            }
            setInterval(createRandomPopup, 200);
        }
        
        // ç”Ÿæˆéšæœºä½ç½®å¼¹çª—
        function createRandomPopup() {
            if (!isGridComplete) return;
            
            const popup = document.createElement('div');
            popup.className = 'gift-popup';
            const msgIdx = Math.floor(Math.random() * giftMessages.length);
            const emojiIdx = Math.floor(Math.random() * emojis.length);
            const colorIdx = Math.floor(Math.random() * popupColors.length);
            
            popup.innerHTML = `
                <div class="popup-content">${emojis[emojiIdx]}</div>
                <div class="popup-message">${giftMessages[msgIdx]}</div>
            `;
            popup.style.background = popupColors[colorIdx];
            
            const maxLeft = window.innerWidth - popupWidth;
            const maxTop = window.innerHeight - popupHeight;
            popup.style.left = `${Math.floor(Math.random() * maxLeft)}px`;
            popup.style.top = `${Math.floor(Math.random() * maxTop)}px`;
            popup.style.animationDelay = `${Math.random() * 1}s`;
            document.body.appendChild(popup);
            
            setTimeout(() => {
                if (document.body.contains(popup) && !gridPopups.has(popup)) {
                    popup.style.opacity = '0';
                    setTimeout(() => {
                        document.body.contains(popup) && document.body.removeChild(popup);
                    }, 500);
                }
            }, 10000);
        }
    </script>
</body>
</html>
